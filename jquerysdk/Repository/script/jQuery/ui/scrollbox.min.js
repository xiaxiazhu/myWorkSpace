jQuery.plugin("jQuery.ui.scrollbox",["jQuery.fn.size","jQuery.support.touch","jQuery.event.special.dom","jQuery.event.special.mouse","jQuery.event.special.touch","jQuery.ui.widget"],function(i,g){var h=i.style,l=i.css,n=function(s,p,r){var o={},q;i.each(p.split(" "),function(t,u){if((q=s[u]||"")||r){o[u]=q}});return o},b="overflow-x overflow-y position",m={paddingX:"padding-x",paddingY:"padding-y",layer:"layer",dragX:'drag-x ui-corner-all ui-state-default" tabIndex="0',dragY:'drag-y ui-corner-all ui-state-default" tabIndex="0'},e=['<div class="ui-scrollbox-helper ui-scrollbox-',"",'"/>'],k=function(p,q){var o={};if(q=="dragX"||q=="dragY"){o={"mouseenter.scrollbox":function(){p[q].addClass("ui-state-hover")},"mouseleave.scrollbox":function(){p[q].removeClass("ui-state-hover")},"blur.scrollbox":function(){p[q].removeClass("ui-state-active ui-state-focus")},"focus.scrollbox":function(r){p[q].addClass("ui-state-active ui-state-focus");p._onEnter()},"selectstart.scrollbox":function(r){r.preventDefault()},"mousedrag.scrollbox":p.Proxy("_onMousedrag")}}else{if(q==m[3]){o={"touchdrag.scrollbox":p.Proxy("_onTouchdrag")}}}return o},d=/rgba?\((\d+), (\d+), (\d+)/,f=function(o){var p=d.exec(o);return p?((parseInt(p[1])*299+parseInt(p[2])*587+parseInt(p[3])*114)/1000)<125:false},a={},j={},c=function(){if(window.getSelection){window.getSelection().removeAllRanges()}else{if(document.getSelection){document.getSelection().removeAllRanges()}else{if(document.selection&&document.selection.removeAllRanges){document.selection.removeAllRanges()}}}};i.each("-webkit-user-select -khtml-user-select -moz-user-select -ms-user-select -o-user-selectt user-select".split(" "),function(p,o){j[o]="none";a[o]=""});i.widget("ui.scrollbox",{options:{lockAxis:false},_create:function(){var q=this,v=q.options,s=q.element,r=s[0],u=q.restoreStyle={},p=q.restoreCSS={},t=q.originalCSS={};i.each(b.split(" "),function(o,w){u[w]=h(r,w);p[w]=l(r,w);t[w]=u[w]||p[w]});v.horizontal=i.type(v.horizontal)!="boolean"?!(t["overflow-x"]=="hidden"):v.horizontal;v.vertical=i.type(v.vertical)!="boolean"?!(t["overflow-y"]=="hidden"):v.vertical;s.addClass("ui-scrollbox").attr("tabindex",s.attr("tabindex")||0).css("position",t.position=="static"?"relative":t.position).on({"resize.scrollbox":q.Proxy("_onResize"),"keydown.scrollbox":q.Proxy("_onKeydrag")});if(i.support.touch){s.on({"touchdrag.scrollbox":q.Proxy("_onTouchdrag")})}else{s.on({"mouseenter.scrollbox focus.scrollbox":q.Proxy("_onEnter"),"mouseleave.scrollbox":q.Proxy("_onLeave"),"mousewheel.scrollbox":q.Proxy("_onMousewheel")})}q.sizes={top:0,left:0,dWidth:0,dHeight:0}},_init:function(){var o=this,p=f(o.element.css("background-color")+"");o.element.toggleClass("ui-scrollbox-light",!p).toggleClass("ui-scrollbox-dark",p);o._onResize()},_helper:function(){var p=this,r=p.element,o=p.stack||(p.stack=i()),s,q=0;i.each(m,function(t,u){if(!p[t]||!p[t][0].parentNode){s=!0;e[1]=u;p[t]=null;o.splice(q,1,(p[t]=i(e.join("")).on(k(p,t)))[0])}q++});if(s){o.appendTo(r)}},_onResize:function(){var C=this,s=C.options,u=C.element,E=C.sizes,y=E.top,x=E.left;C._helper();C._move([],-x,-y);C.paddingX.hide();C.paddingY.hide();var w=E.width=u.innerWidth(),t=E.height=u.innerHeight(),p=E.contentWidth=u.prop("scrollWidth"),A=E.contentHeight=u.prop("scrollHeight"),B=C.dragX.outerHeight(true),v=C.dragY.outerWidth(true),z=Math.max(w*w/p,B),D=Math.max(t*t/A,v),r=(E.dDragWidth=w-z)<=0||!s.horizontal,q=(E.dDragHeight=t-D)<=0||!s.vertical;C.dragX.outerWidth((E.dragWidth=q?z:z-B),true);C.dragY.outerHeight((E.dragheight=r?D:D-v),true);E.dWidth=(E.contentWidth=u.prop("scrollWidth"))-w;E.dHeight=(E.contentHeight=u.prop("scrollHeight"))-t;if(E.dHeight>0){C.paddingX.show().css({top:A+"px",height:u.css("padding-bottom")})}if(E.dWidth>0&&s.vertical){C.paddingY.show().css({left:p+"px",width:u.css("padding-right")})}C._move([],x,y);E.dWidth=(E.contentWidth=u.prop("scrollWidth"))-w;E.dHeight=(E.contentHeight=u.prop("scrollHeight"))-t},_onTouchdrag:function(p){var y=this,v=-p.dragDeltaX,u=-p.dragDeltaY;if(p.dragState=="start"&&y.options.lockAxis){var w=Math.abs(v)-Math.abs(u);y.scrollLock=w<-4?"y":w>4?"x":""}if(y.scrollLock=="y"){v=p.dragDeltaX=0}if(y.scrollLock=="x"){u=p.dragDeltaY=0}if(p.dragState=="stop"&&p.dragDeltaT<50){var t=y.touchdragEventCache,s=y.options;v=s.horizontal?-t.dragDeltaX:0;u=s.vertical?-t.dragDeltaY:0;y.scrollLock="";if((Math.abs(v)>10||Math.abs(u)>10)){var x=(0.002*p.dragDeltaT),r=1,q=function(){r+=x;y._move([1,1],v=v/r,u=u/r,null,Math.abs(u)>0.5||Math.abs(v)>0.5?q:null)};y._move([1,1],v,u,p,q)}}else{y.touchdragEventCache=p;y._move([1,1],v,u,p)}},_onMousedrag:function(r){var o=this,q=i(r.target),p=o.sizes;r.preventDefault();if(q.is(".ui-scrollbox-drag-x")){o._move([1,1],p.dWidth*r.dragDeltaX/p.dDragWidth,0,r)}else{o._move([1,1],0,p.dHeight*r.dragDeltaY/p.dDragHeight,r)}},_onKeydrag:function(o){var v=this,r=i(o.target),w=v.sizes,u=o.keyCode||o.which,t=u==37?-25:u==39?25:0,s=u==38?-25:u==40?25:0,q=1,p=function(){q+=0.16;v._move([1,0],t=t/q,s=s/q,null,Math.abs(s)>0.5||Math.abs(t)>0.5?p:null)};if(t||s){v._move([1,0],t,s,o,p)}},_onMousewheel:function(o){this._move([1,0],-o.wheelDeltaX*45,-o.wheelDeltaY*45,o)},_onEnter:function(o){this._show([1,0])},_onLeave:function(o){this._hide()},_move:function(z,u,s,q,t){var A=this,v=A.options,w=A.element,B=A.sizes,r=w.scrollLeft(),y=Math.min(B.dWidth,Math.max(r+(v.horizontal?u:0),0)),p=w.scrollTop(),x=Math.min(B.dHeight,Math.max(p+(v.vertical?s:0),0));if(y!=r||x!=p){clearTimeout(A.animateTimer);A.layer[0].style.left=(B.left=y)+"px";A.layer[0].style.top=(B.top=x)+"px";A.dragX[0].style.bottom=(-x)+"px";A.dragX[0].style.left=(y+(y*B.dDragWidth/B.dWidth||1))+"px";A.dragY[0].style.top=(x+(x*B.dDragHeight/B.dHeight||1))+"px";A.dragY[0].style.right=(-y)+"px";w.scrollLeft(y).scrollTop(x);A._show(z);if(q){q.preventDefault();q.stopImmediatePropagation()}if(t){A.animateTimer=setTimeout(t,25)}}},_show:function(p){var q=this,r=q.options;if(!p){p=[]}if(p[1]){q.element.css(j);c();q.layer.stop(true,true).show().fadeTo(1,1).delay(100).fadeTo(100,0,function(){q.element.css(a);c();q.layer.hide()})}if(p[0]&&q.sizes.dDragWidth>0&&r.horizontal){q.dragX.stop(true,true).fadeTo(500,1).delay(500).fadeTo(500,0)}if(p[0]&&q.sizes.dDragHeight>0&&r.vertical){q.dragY.stop(true,true).fadeTo(500,1).delay(500).fadeTo(500,0)}},_hide:function(){this.dragX.stop(true,true).fadeTo(500,0);this.dragY.stop(true,true).fadeTo(500,0)},destroy:function(){var o=this;o.element.off(".scrollbox").removeClass("ui-scrollbox").css(i.extend(n({},b,!0),o.restoreStyle));o.stack.remove();o.Inherited(arguments)}})});