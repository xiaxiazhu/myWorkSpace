jQuery.plugin("jQuery.event.special.touch","jQuery.event.fix",function(d,e){var k=d("html"),i="_specialTouchdrag",p="_specialTouchpinch",r="_specialTouchpinchInOut",h="_specialTouchswipe",g=function(){},b=function(){},m=function(v,u,t){return t&&Math.abs(v)<t?false:!v?u:(v>=0?"in":"out")},c=function(u,t,v){var x=Math.abs(u),w=Math.abs(t);return(Math.abs(x-w)<=1)||!(!v||x>v||w>v)?false:(x>w?(u<0?"left":"right"):(t<0?"up":"down"))},l=function(t,u){return(t[d.expando]||(t[d.expando]=++d.guid))+"."+(u.guid||(u.guid=++d.guid))},j=function(v,u){var t=v.nodeType===3?v.parentNode:v;return t===u||d.contains(u,t)},q=function(x,t,u,v,w){return(q[w]=function(B){var C=B.touches,A=x.type==="touchdrag"&&C.length===1&&j(B.originalTarget,u),y=x.type==="touchpinch"&&C.length===2&&j(C[0].target,u)&&j(C[1].target,u),z;if(A||y){k.on("touchmove."+v,n(x,t,u,v,w)).on("touchend."+v,s(x,t,u,v,w)).on("touchcancel."+v,f(x,t,u,v,w));z=n[w];z.direction=true;z.state="start";z.deltaT=B.timeStamp}if(A){z.startT=z.deltaT;z.startX=(z.deltaX=B.pageX)+0;z.startY=(z.deltaY=B.pageY)+0}if(y){z.delta=Math.sqrt(Math.pow(z.startX=(z.deltaX=Math.abs(C[0].pageX-C[1].pageX))+0,2)+Math.pow(z.startY=(z.deltaY=Math.abs(C[0].pageY-C[1].pageY))+0,2));z.start=z.delta+0}})},n=function(x,t,u,v,w){return(n[w]=function(B){var E=B.touches,y=x.type==="touchdrag",H=x.type==="touchpinch"&&E.length>=2,z=n[w],A,F,D,C,J,I,G;if(y){A=B.dragState=z.state;F=B.dragDeltaT=-z.deltaT+(z.deltaT=B.timeStamp);D=B.dragDeltaX=-z.deltaX+(z.deltaX=B.pageX);C=B.dragDeltaY=-z.deltaY+(z.deltaY=B.pageY);J=B.dragDelta=Math.sqrt(Math.pow(D,2)+Math.pow(C,2));G=z.direction;I=c(D,C)}if(H){B.pinchState=z.state;B.pinchDeltaT=-z.deltaT+(z.deltaT=B.timeStamp);B.pinchDeltaX=-z.deltaX+(z.deltaX=D=Math.abs(E[0].pageX-E[1].pageX));B.pinchDeltaY=-z.deltaY+(z.deltaY=C=Math.abs(E[0].pageY-E[1].pageY));B.pinchDelta=-z.delta+(z.delta=J=Math.sqrt(Math.pow(D,2)+Math.pow(C,2)));I=m(B.pinchDelta,G=z.direction)}if(y||H){B.type=x.type;B.target=u;B.data=x.data;z.state="while";z.direction=I&&G?G!==true?(I==G?I:false):I:G;t.apply(u,arguments)}})},s=function(x,t,u,v,w){return(s[w]=function(B){if(n[w]){k.off("touchmove."+v,n[w]).off("touchend."+v,s[w]).off("touchcancel."+v,s[w]);var C=/^touch(end|cancel)$/.test(B.type),y=x.type==="touchdrag"&&C,H=x.type==="touchpinch"&&C,z=n[w],A,F,E,D,J,I,G;if(y){B.dragState=z.state="stop";B.dragDeltaT=-z.deltaT+B.timeStamp;B.dragDeltaX=0;B.dragDeltaY=0;B.dragDelta=0}if(H){B.pinchState=z.state="stop";B.pinchDeltaT=-z.deltaT+B.timeStamp;B.pinchDeltaX=0;B.pinchDeltaY=0;B.pinchDelta=0}if(y||H){B.type=x.type;B.target=u;B.data=x.data;t.apply(u,arguments)}if(y&&v==h){delete (B.dragState);F=B.dragDeltaT=-z.startT+B.timeStamp;E=B.dragDeltaX=-z.startX+z.deltaX;D=B.dragDeltaY=-z.startY+z.deltaY;G=z.direction;I=c(E,D,20);if(I&&G==I){B.type="touchswipe"+I;d(u).trigger(B)}}if(H&&v==r){delete (B.pinchState);F=B.pinchDeltaT=-z.startT+B.timeStamp;E=B.pinchDeltaX=-z.startX+z.deltaX;D=B.pinchDeltaY=-z.startY+z.deltaY;J=B.pinchDelta=-z.start+z.delta;I=m(J,G=z.direction,80);if(I&&G==I){B.type="touchpinch"+I;d(u).trigger(B)}}delete (n[w]);delete (s[w])}})},f=s;d.each({touchdrag:i,touchpinch:p},function(t,u){d.event.special[t]={setup:d.noop,add:function(v){u=v.namespace===h?h:v.namespace===r?r:u;d(this).on("touchstart."+u,q(v,v.handler,this,u,l(this,v)))},remove:function(v){var y=l(this,v),w=q[y],x=n[y];u=v.namespace===h?h:v.namespace===r?r:u;d(this).off("touchstart."+u,w);delete (w);k.off("touchmove."+u,x);delete (x)}}});d.each({"in":r,out:r},function(t,u){d.event.special["touchpinch"+t]={setup:d.noop,add:function(v){if(!q[l(this,g)]){d(this).on("touchpinch."+u,g)}}}});d.each({up:h,right:h,down:h,left:h},function(t,u){d.event.special["touchswipe"+t]={setup:d.noop,add:function(v){if(!q[l(this,b)]){d(this).on("touchdrag."+u,b)}}}});var a={},o="State DeltaT DeltaX DeltaY Delta".split(" ");d.event.special.touchzoom={setup:d.noop,add:function(t){d.debug.warn("METHOD DEPRECATED: 'touchzoom' event is replaced by 'touchpinch' event");d(this).on("touchpinch."+p,(a[l(this,t)]=function(w){for(var v=0,u=o.length;v<u;v++){w["zoom"+o[v]]=w["pinch"+o[v]];delete w["pinch"+o[v]]}w.type="touchzoom";t.handler.apply(this,arguments)}))},remove:function(t){var u=l(this,t);d(this).off("touchpinch."+namespacePinc,a[u]);delete a[u]}}});