/*
Copyright 2013, KISSY v1.40
MIT Licensed
build time: Sep 17 23:08
*/
KISSY.add("json/quote",function(l){var h={"":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},f={},k=/["\b\f\n\r\t\x00-\x1f]/g,c=/\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;l.each(h,function(a,b){f[b]=a});f["\\/"]="/";return{quote:function(a){return'"'+a.replace(k,function(b){var a;if(!(a=h[b]))a="\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4);return a})+'"'},unQuote:function(a){return a.slice(1,a.length-1).replace(c,function(a){var c;if(!(c=f[a]))c=String.fromCharCode(parseInt(a.slice(2),
16));return c})}}});
KISSY.add("json/stringify",function(l,h){function f(c){return 10>c?"0"+c:c}function k(c,a,b,d,j,q,g){var e=a[c];if(e&&"object"===typeof e)if("function"===typeof e.toJSON)e=e.toJSON(c);else if(e instanceof Date)e=isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null;else if(e instanceof String||e instanceof Number||e instanceof Boolean)e=e.valueOf();void 0!==b&&(e=b.call(a,c,e));switch(typeof e){case "number":return isFinite(e)?
""+e:"null";case "string":return h.quote(e);case "boolean":return""+e;case "object":if(e)if(l.isArray(e)){for(var c=e,a=g,g=g+j,e=[],p=c.length,m=0;m<p;){var i=k(""+m,c,b,d,j,q,g);e[e.length]=void 0===i?"null":i;++m}e.length?j?(b=e.join("\n,"+g),b="[\n"+g+b+"\n"+a+"]"):b="["+e.join(",")+"]":b="[]"}else{for(var c=e,a=g,g=g+j,n,e=void 0!==d?d:l.keys(c),i=[],m=0,p=e.length;m<p;m++){n=e[m];var o=k(n,c,b,d,j,q,g);void 0!==o&&(n=h.quote(n),n+=":",j&&(n+=" "),n+=o,i[i.length]=n)}i.length?j?(b=i.join(",\n"+
g),b="{\n"+g+b+"\n"+a+"}"):b="{"+i.join(",")+"}":b="{}"}else b="null";return b}}return function(c,a,b){var d="",j,f;a&&("function"===typeof a?f=a:l.isArray(a)&&(j=a));"number"===typeof b?(b=Math.min(10,b),d=Array(b+1).join(" ")):"string"===typeof b&&(d=b.slice(0,10));return k("",{"":c},f,j,d,[],"")}},{requires:["./quote"]});
KISSY.add("json/parser",function(){var l={},h=KISSY,f=function(c){this.rules=[];h.mix(this,c);this.resetInput(this.input)};f.prototype={constructor:function(c){this.rules=[];h.mix(this,c);this.resetInput(this.input)},resetInput:function(c){h.mix(this,{input:c,matched:"",stateStack:[f.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var c=this.stateStack[this.stateStack.length-1],a=[],c=this.mapState(c);h.each(this.rules,
function(b){var d=b.state||b[3];d?h.inArray(c,d)&&a.push(b):c==f.STATIC.INITIAL&&a.push(b)});return a},pushState:function(c){this.stateStack.push(c)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var c=f.STATIC.DEBUG_CONTEXT_LIMIT,a=this.matched,b=this.match,d=this.input,a=a.slice(0,a.length-b.length),a=(a.length>c?"...":"")+a.slice(-c).replace(/\n/," "),b=b+d,b=b.slice(0,c)+(b.length>c?"...":"");return a+b+"\n"+Array(a.length+
1).join("-")+"^"},mapSymbol:function(c){var a=this.symbolMap;return!a?c:a[c]||(a[c]=++this.symbolId)},mapReverseSymbol:function(c){var a=this.symbolMap,b,d=this.reverseSymbolMap;if(!d&&a)for(b in d=this.reverseSymbolMap={},a)d[a[b]]=b;return d?d[c]:c},mapState:function(c){var a=this.stateMap;return!a?c:a[c]||(a[c]=++this.stateId)},lex:function(){var c=this.input,a,b,d,j=this.getCurrentRules();this.match=this.text="";if(!c)return this.mapSymbol(f.STATIC.END_TAG);for(a=0;a<j.length;a++){b=j[a];var q=
b.token||b[0];d=b.action||b[2]||void 0;if(b=c.match(b.regexp||b[1])){if(a=b[0].match(/\n.*/g))this.lineNumber+=a.length;h.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:a?a[a.length-1].length-1:this.lastColumn+b[0].length});a=this.match=b[0];this.matches=b;this.text=a;this.matched+=a;d=d&&d.call(this);d=void 0==d?q:this.mapSymbol(d);this.input=c=c.slice(a.length);return d?d:this.lex()}}"lex error at line "+this.lineNumber+":\n"+this.showDebugInfo()}};
f.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var k=new f({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});l.lexer=k;k.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,
json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};l.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],
[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var c={};c[this.$1.key]=this.$1.value;return c}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];l.table={gotos:{"0":{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},
action:{"0":{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,
10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,
0],8:[2,14,0]}}};l.parse=function(c){var a=this,b=a.lexer,d,j,f,g=a.table,e=g.gotos,g=g.action,l=a.productions,m=[null],i=[0];for(b.resetInput(c);;){d=i[i.length-1];j||(j=b.lex());if(!j)return"it is not a valid input: "+c,"error",!1;f=g[d]&&g[d][j];if(!f){var n=[];g[d]&&h.each(g[d],function(b,c){n.push(a.lexer.mapReverseSymbol(c))});c="Syntax error at line "+b.lineNumber+":\n"+b.showDebugInfo()+"\nexpect "+n.join(", ");c;return!1}switch(f[0]){case 1:i.push(j);m.push(b.text);i.push(f[2]);j=null;break;
case 2:var o=l[f[1]];d=o.symbol||o[0];f=o.action||o[2];var k=(o.rhs||o[1]).length,r=0,s=void 0,o=m[m.length-k];for(a.$$=o;r<k;r++)a["$"+(k-r)]=m[m.length-1-r];f&&(s=f.call(a));o=void 0!==s?s:a.$$;k&&(i=i.slice(0,-2*k),m=m.slice(0,-1*k));i.push(d);m.push(o);i.push(e[i[i.length-2]][i[i.length-1]]);break;case 0:return o}}};return l});
KISSY.add("json/parse",function(l,h,f){function k(c,a,b){var d=c[a],f,h,g;if("object"===typeof d)if(l.isArray(d)){f=0;h=d.length;for(var e=[];f<h;)g=k(d,""+f,b),void 0!==g&&(e[e.length]=g);d=e}else{e=l.keys(d);f=0;for(h=e.length;f<h;f++){var p=e[f];g=k(d,p,b);void 0===g?delete d[p]:d[p]=g}}return b.call(c,a,d)}h.yy={unQuote:f.unQuote};return function(c,a){var b=h.parse(""+c);return a?k({"":b},"",a):b}},{requires:["./parser","./quote"]});
KISSY.add("json",function(l,h,f){return l.JSON={stringify:h,parse:f}},{requires:["./json/stringify","./json/parse"]});
