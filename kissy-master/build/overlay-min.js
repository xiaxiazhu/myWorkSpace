/*
Copyright 2013, KISSY v1.40
MIT Licensed
build time: Oct 25 11:43
*/
KISSY.add("overlay/extension/loading",function(d,b){function e(){}e.prototype={loading:function(){this._loadingExtEl||(this._loadingExtEl=(new b("<div class='"+this.get("prefixCls")+"ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'/>")).appendTo(this.$el));this._loadingExtEl.show()},unloading:function(){var a=this._loadingExtEl;a&&a.hide()}};return e},{requires:["node"]});
KISSY.add("overlay/extension/mask",function(d,b){function e(a){a=a.view.getBaseCssClasses("mask");a=i("<div  style='width:"+(c?"expression(KISSY.DOM.docWidth())":"100%")+";left:0;top:0;height:"+(c?"expression(KISSY.DOM.docHeight())":"100%")+";position:"+(c?"absolute":"fixed")+";' class='"+a+"'>"+(c?"<iframe style='position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;'></iframe>":
"")+"</div>").prependTo("body");a.unselectable();a.on("mousedown",function(a){a.preventDefault()});return a}function a(){}function g(a,c){var b=a.get("maskNode"),h=a.view.getBaseCssClasses("mask-hidden");c?b.removeClass(h):b.addClass(h)}function f(a,b,c,h){var e=a.effect||k;g(h,c);if(e!=k){var h=a.duration,a=a.easing,f=c?1:0;b.stop(1,1);b.css("display",c?k:"block");b[e+o[e][f]](h,function(){b.css("display","")},a)}}function h(a){var b=this.get("maskNode");if(a=a.newVal){var c=Number(this.$el.css("z-index"));
isNaN(c)||b.css("z-index",c)}f(this.get("mask"),b,a,this)}var c=6===d.UA.ie,i=b.all;a.ATTRS={mask:{value:!1},maskNode:{}};var k="none",o={fade:["Out","In"],slide:["Up","Down"]};a.prototype={__renderUI:function(){this.get("mask")&&this.set("maskNode",e(this))},__bindUI:function(){var a,c;if(c=this.get("mask")){a=this.get("maskNode");if(c.closeOnClick)a.on(b.Gesture.tap,this.close,this);this.on("afterVisibleChange",h)}},__destructor:function(){var a;(a=this.get("maskNode"))&&a.remove()}};return a},
{requires:["node"]});KISSY.add("overlay/overlay-xtpl",function(){return function(d,b,e){var a=this.config.utils.getPropertyOrRunCommand,b="",g={},f=[];f.push("overlay/close-xtpl");g.params=f;g=a(this,d,g,"include",0,1,!1,e);b=b+g+"\r\n";g={};f=[];f.push("component/extension/content-render/content-xtpl");g.params=f;d=a(this,d,g,"include",0,2,!1,e);return b+d}});
KISSY.add("overlay/close-xtpl",function(){return function(d,b,e){var a,g=this;a=this.config.utils;var b=a.runBlockCommand,f=a.getExpression,h=a.getPropertyOrRunCommand;a="";var c={},i=[],k=h(g,d,{},"closable",0,1,e,!0);i.push(k);c.params=i;c.fn=function(a){var c;c='\r\n<a href="javascript:void(\'close\')"\r\n   id="ks-overlay-close-';var b=h(g,a,{},"id",0,3,e,!1);c+=f(b,!0);c+='"\r\n   class="';var b={},d=[];d.push("close");b.params=d;b=h(g,a,b,"getBaseCssClasses",0,4,!0,e);c=c+b+"\"\r\n   role='button'>\r\n    <span class=\"";
b={};d=[];d.push("close-x");b.params=d;a=h(g,a,b,"getBaseCssClasses",0,6,!0,e);return c+a+'">close</span>\r\n</a>\r\n'};a+=b(g,d,c,"if",1);return a+"\r\n"}});KISSY.add("overlay/overlay-render",function(d,b,e,a){return b.getDefaultRender().extend([a],{},{ATTRS:{contentTpl:{value:e}},HTML_PARSER:{closeBtn:function(a){return a.one("."+this.getBaseCssClass("close"))}}})},{requires:["component/container","./overlay-xtpl","component/extension/content-render","./close-xtpl"]});
KISSY.add("overlay/extension/overlay-effect",function(d){function b(a){var c=a.$el.clone(!0);c.css({visibility:"visible",overflow:"hidden"}).addClass(a.get("prefixCls")+"overlay-ghost");return a.__afterCreateEffectGhost(c)}function e(a,c,e){a.__effectGhost&&a.__effectGhost.stop(1,1);var f=a.$el,g=d.all,l=a.get("effect"),j=g(l.target),g=l.duration,j=d.mix(j.offset(),{width:j.width(),height:j.height()}),n=d.mix(f.offset(),{width:f.width(),height:f.height()}),m=b(a),l=l.easing;m.insertAfter(f);c?(c=
j,j=n):c=n;f.css("visibility","hidden");m.css(c);a.__effectGhost=m;m.animate(j,{duration:g,easing:l,complete:function(){a.__effectGhost=null;m.remove();f.css("visibility","");e()}})}function a(a,c,b){var d=a.$el,g=a.get("effect"),l=g.effect||"none",j=g.target;"none"==l&&!j?b():j?e(a,c,b):(a=g.duration,g=g.easing,j=c?1:0,d.stop(1,1),d.css({visibility:"visible",display:c?"none":"block"}),d[l+f[l][j]](a,function(){d.css({display:"block",visibility:""});b()},g))}function g(){}var f={fade:["Out","In"],
slide:["Up","Down"]};g.ATTRS={effect:{value:{effect:"",target:null,duration:0.5,easing:"easeOut"},setter:function(a){var b=a.effect;"string"==typeof b&&!f[b]&&(a.effect="")}}};g.prototype={__afterCreateEffectGhost:function(a){return a},_onSetVisible:function(b){var c=this;a(c,b,function(){c.fire(b?"show":"hide")})}};return g});
KISSY.add("overlay/control",function(d,b,e,a,g,f,h,c){var i={hide:"hide",destroy:"destroy"};return b.extend([e,g,a,f,c],{bindUI:function(){var a=this,b=a.get("closeBtn");if(b)b.on("click",function(b){a.close();b.preventDefault()})},close:function(){this[i[this.get("closeAction")]||"hide"]();return this}},{ATTRS:{contentEl:{},closable:{value:!1,view:1},closeBtn:{view:1},closeAction:{value:"hide"},focusable:{value:!1},allowTextSelection:{value:!0},handleMouseEvents:{value:!1},visible:{value:!1},xrender:{value:h}},
xclass:"overlay"})},{requires:"component/container,component/extension/shim,component/extension/align,./extension/loading,./extension/mask,./overlay-render,./extension/overlay-effect".split(",")});
KISSY.add("overlay/dialog-xtpl",function(){return function(d,b,e){var a=this,b=this.config.utils,g=b.runBlockCommand,f=b.getExpression,h=b.getPropertyOrRunCommand,b="",c={},i=[];i.push("overlay/close-xtpl");c.params=i;c=h(a,d,c,"include",0,1,!1,e);b=b+c+'\r\n<div id="ks-content-';c=h(a,d,{},"id",0,2,e,!1);b+=f(c,!0);b+='"\r\n     class="';c={};i=[];i.push("content");c.params=i;c=h(a,d,c,"getBaseCssClasses",0,3,!0,e);b=b+c+'">\r\n    <div class="';c={};i=[];i.push("header");c.params=i;var c=h(a,d,
c,"getBaseCssClasses",0,4,!0,e),b=b+c+'"\r\n         style="\r\n',c={},i=[],k=h(a,d,{},"headerStyle",0,6,e,!0);i.push(k);c.params=i;c.fn=function(b){var c;c=" \r\n ";var d=h(a,b,{},"xindex",0,7,e,!1);c+=f(d,!0);c+=":";b=h(a,b,{},".",0,7,e,!1);c+=f(b,!0);return c+";\r\n"};b+=g(a,d,c,"each",6);b+='\r\n"\r\n         id="ks-stdmod-header-';c=h(a,d,{},"id",0,10,e,!1);b+=f(c,!0);b+='">';c=h(a,d,{},"headerContent",0,10,e,!1);b+=f(c,!1);b+='</div>\r\n\r\n    <div class="';c={};i=[];i.push("body");c.params=
i;c=h(a,d,c,"getBaseCssClasses",0,12,!0,e);b=b+c+'"\r\n         style="\r\n';c={};i=[];k=h(a,d,{},"bodyStyle",0,14,e,!0);i.push(k);c.params=i;c.fn=function(b){var c;c=" \r\n ";var d=h(a,b,{},"xindex",0,15,e,!1);c+=f(d,!0);c+=":";b=h(a,b,{},".",0,15,e,!1);c+=f(b,!0);return c+";\r\n"};b+=g(a,d,c,"each",14);b+='\r\n"\r\n         id="ks-stdmod-body-';c=h(a,d,{},"id",0,18,e,!1);b+=f(c,!0);b+='">';c=h(a,d,{},"bodyContent",0,18,e,!1);b+=f(c,!1);b+='</div>\r\n\r\n    <div class="';c={};i=[];i.push("footer");
c.params=i;c=h(a,d,c,"getBaseCssClasses",0,20,!0,e);b=b+c+'"\r\n         style="\r\n';c={};i=[];k=h(a,d,{},"footerStyle",0,22,e,!0);i.push(k);c.params=i;c.fn=function(b){var c;c=" \r\n ";var d=h(a,b,{},"xindex",0,23,e,!1);c+=f(d,!0);c+=":";b=h(a,b,{},".",0,23,e,!1);c+=f(b,!0);return c+";\r\n"};b+=g(a,d,c,"each",22);b+='\r\n"\r\n         id="ks-stdmod-footer-';g=h(a,d,{},"id",0,26,e,!1);b+=f(g,!0);b+='">';d=h(a,d,{},"footerContent",0,26,e,!1);b+=f(d,!1);return b+'</div>\r\n</div>\r\n<div tabindex="0"></div>'}});
KISSY.add("overlay/dialog-render",function(d,b,e){return b.extend({beforeCreateDom:function(a){d.mix(a.elAttrs,{role:"dialog","aria-labelledby":"ks-stdmod-header-"+this.control.get("id")})},createDom:function(){this.fillChildrenElsBySelectors({header:"#ks-stdmod-header-{id}",body:"#ks-stdmod-body-{id}",footer:"#ks-stdmod-footer-{id}"})},getChildrenContainerEl:function(){return this.control.get("body")},_onSetBodyStyle:function(a){this.control.get("body").css(a)},_onSetHeaderStyle:function(a){this.control.get("header").css(a)},
_onSetFooterStyle:function(a){this.control.get("footer").css(a)},_onSetBodyContent:function(a){var b;b=this.control.get("body");b.html(a)},_onSetHeaderContent:function(a){var b;b=this.control.get("header");b.html(a)},_onSetFooterContent:function(a){var b;b=this.control.get("footer");b.html(a)}},{ATTRS:{contentTpl:{value:e}},HTML_PARSER:{header:function(a){return a.one("."+this.getBaseCssClass("header"))},body:function(a){return a.one("."+this.getBaseCssClass("body"))},footer:function(a){return a.one("."+
this.getBaseCssClass("footer"))},headerContent:function(a){return a.one("."+this.getBaseCssClass("header")).html()},bodyContent:function(a){return a.one("."+this.getBaseCssClass("body")).html()},footerContent:function(a){return(a=a.one("."+this.getBaseCssClass("footer")))&&a.html()}}})},{requires:["./overlay-render","./dialog-xtpl"]});
KISSY.add("overlay/dialog",function(d,b,e,a){var d=b.extend({__afterCreateEffectGhost:function(a){var b=this.get("body");a.all("."+this.get("prefixCls")+"stdmod-body").css({height:b.height(),width:b.width()}).html("");return a},handleKeyDownInternal:function(b){if(this.get("escapeToClose")&&b.keyCode===a.KeyCode.ESC){if("select"!=b.target.nodeName.toLowerCase()||b.target.disabled)this.close(),b.halt()}else a:if(b.keyCode==g){var d=this.$el,c=a.all(b.target),e=d.last();if(c.equals(el)&&b.shiftKey)e[0].focus(),
b.halt();else if(c.equals(e)&&!b.shiftKey)this.focus(),b.halt();else if(c.equals(d)||d.contains(c))break a;b.halt()}},_onSetVisible:function(a,b){var c=this.el;if(a)this.__lastActive=c.ownerDocument.activeElement,this.focus(),c.setAttribute("aria-hidden","false");else{c.setAttribute("aria-hidden","true");try{this.__lastActive&&this.__lastActive.focus()}catch(d){}}this.callSuper(a,b)}},{ATTRS:{header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{value:{},view:1},footerStyle:{value:{},view:1},headerStyle:{value:{},
view:1},headerContent:{value:"",view:1},bodyContent:{value:"",view:1},footerContent:{value:"",view:1},closable:{value:!0},xrender:{value:e},focusable:{value:!0},escapeToClose:{value:!0}},xclass:"dialog"}),g=a.KeyCode.TAB;return d},{requires:["./control","./dialog-render","node"]});
KISSY.add("overlay/popup",function(d,b,e){return b.extend({initializer:function(){var a=this;a.get("trigger")&&("mouse"===a.get("triggerType")?(a._bindTriggerMouse(),a.on("afterRenderUI",function(){a._bindContainerMouse()})):a._bindTriggerClick())},_bindTriggerMouse:function(){var a=this,b=a.get("trigger"),f;a.__mouseEnterPopup=function(b){a._clearHiddenTimer();f=d.later(function(){a._showing(b);f=e},1E3*a.get("mouseDelay"))};b.on("mouseenter",a.__mouseEnterPopup);a._mouseLeavePopup=function(){f&&
(f.cancel(),f=e);a._setHiddenTimer()};b.on("mouseleave",a._mouseLeavePopup)},_bindContainerMouse:function(){this.$el.on("mouseleave",this._setHiddenTimer,this).on("mouseenter",this._clearHiddenTimer,this)},_setHiddenTimer:function(){var a=this;a._hiddenTimer=d.later(function(){a._hiding()},1E3*a.get("mouseDelay"))},_clearHiddenTimer:function(){this._hiddenTimer&&(this._hiddenTimer.cancel(),this._hiddenTimer=e)},_bindTriggerClick:function(){var a=this;a.__clickPopup=function(b){b.preventDefault();
if(a.get("toggle"))a[a.get("visible")?"_hiding":"_showing"](b);else a._showing(b)};a.get("trigger").on("click",a.__clickPopup)},_showing:function(a){this.set("currentTrigger",d.one(a.target));this.show()},_hiding:function(){this.set("currentTrigger",e);this.hide()},destructor:function(){var a=this.$el,b=this.get("trigger");b&&(this.__clickPopup&&b.detach("click",this.__clickPopup),this.__mouseEnterPopup&&b.detach("mouseenter",this.__mouseEnterPopup),this._mouseLeavePopup&&b.detach("mouseleave",this._mouseLeavePopup));
a.detach("mouseleave",this._setHiddenTimer,this).detach("mouseenter",this._clearHiddenTimer,this)}},{ATTRS:{trigger:{setter:function(a){return d.all(a)}},triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:0.1},toggle:{value:!1}},xclass:"popup"})},{requires:["./control"]});KISSY.add("overlay",function(d,b,e,a){b.Dialog=e;d.Dialog=e;b.Popup=a;return d.Overlay=b},{requires:["overlay/control","overlay/dialog","overlay/popup"]});
