/*
Copyright 2013, KISSY v1.40dev
MIT Licensed
build time: Oct 22 17:03
*/
KISSY.add("anim/transition",function(g,i,l,o){function p(c){var b="";g.each(c,function(c,a){b&&(b+=",");b+=a+" "+c.duration+"s "+c.easing+" "+c.delay+"s"});return b}function h(c){h.superclass.constructor.apply(this,arguments)}var k=g.Features,m=k.getTransitionPrefix(),q=/([A-Z]|^ms)/g,n=m?m.toLowerCase()+"TransitionEnd":"transitionend",j=k.getTransitionProperty();g.extend(h,o,{doStart:function(){var c=this,b=c.node,d=b.style,a=c._propsData,f=d[j],e,h={};if(e=a.transform)delete a.transform,a[k.getTransformProperty().replace(q,
"-$1").toLowerCase()]=e;g.each(a,function(a,e){var d=a.value,f=i.css(b,e);"number"==typeof d&&(f=parseFloat(f));f==d&&setTimeout(function(){c._onTransitionEnd({originalEvent:{propertyName:e}})},0);h[e]=d});-1!=f.indexOf("none")?f="":f&&(f+=",");d[j]=f+p(a);l.on(b,n,c._onTransitionEnd,c);i.css(b,h)},beforeResume:function(){var c=this._propsData,b=g.merge(c),d=this._runTime/1E3;g.each(b,function(a,b){var e=d;a.delay>=e?a.delay-=e:(e-=a.delay,a.delay=0,a.duration>=e?a.duration-=e:delete c[b])})},_onTransitionEnd:function(c){var c=
c.originalEvent,b=1,d=this._propsData;d[c.propertyName]&&(d[c.propertyName].pos=1,g.each(d,function(a){if(1!==a.pos)return b=0,!1}),b&&this.stop(!0))},doStop:function(c){var b=this.node,d=b.style,a=this._propsData,f=[],e={};l.detach(b,n,this._onTransitionEnd,this);g.each(a,function(a,d){c||(e[d]=i.css(b,d));f.push(d)});a=g.trim(d[j].replace(RegExp("(^|,)\\s*(?:"+f.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none";d[j]=a;i.css(b,e)}});return h},{requires:["dom","event/dom","./base"]});
